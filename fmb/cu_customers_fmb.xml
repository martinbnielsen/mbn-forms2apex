<?xml version = '1.0' encoding = 'UTF-8'?>
<Module version="111020200" xmlns="http://xmlns.oracle.com/Forms">
   <FormModule Name="CU_CUSTOMERS" DirtyInfo="true" Title="MODULE3" MenuModule="DEFAULT&amp;SMARTBAR" ConsoleWindow="WINDOW1">
      <Coordinate CharacterCellWidth="8" DefaultFontScaling="true" CoordinateSystem="Real" CharacterCellHeight="16" RealUnit="Point"/>
      <Block Name="EMP" ScrollbarYPosition="124" ShowScrollbar="true" ScrollbarTabPageName="" DirtyInfo="true" ScrollbarCanvasName="CANVAS4" ScrollbarWidth="15" QueryDataSourceName="S_EMP" ScrollbarXPosition="1591" RecordsDisplayCount="10" ScrollbarLength="160">
         <Item Name="ID" MaximumLength="8" YPosition="124" XPosition="16" DataType="Number" ItemsDisplay="0" ItemType="Text Item" Prompt="Id" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="68" ColumnName="ID" PromptAlign="Center" CanvasName="CANVAS4" Height="16" Required="true"/>
         <Item Name="LAST_NAME" MaximumLength="25" YPosition="124" XPosition="84" ItemsDisplay="0" ItemType="Text Item" Prompt="Last Name" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="195" ColumnName="LAST_NAME" PromptAlign="Center" CanvasName="CANVAS4" DataLengthSemantics="BYTE" Height="16" Required="true"/>
         <Item Name="FIRST_NAME" MaximumLength="25" YPosition="124" XPosition="279" ItemsDisplay="0" ItemType="Text Item" Prompt="First Name" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="195" ColumnName="FIRST_NAME" PromptAlign="Center" CanvasName="CANVAS4" DataLengthSemantics="BYTE" Height="16"/>
         <Item Name="USERID" MaximumLength="8" YPosition="124" XPosition="474" ItemsDisplay="0" ItemType="Text Item" Prompt="Userid" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="68" ColumnName="USERID" PromptAlign="Center" CanvasName="CANVAS4" DataLengthSemantics="BYTE" Height="16"/>
         <Item Name="START_DATE" MaximumLength="11" YPosition="124" XPosition="542" DataType="Date" ItemsDisplay="0" ItemType="Text Item" Prompt="Start Date" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="90" ColumnName="START_DATE" PromptAlign="Center" CanvasName="CANVAS4" Height="16"/>
         <Item Name="COMMENTS" MaximumLength="255" YPosition="124" XPosition="632" ItemsDisplay="0" ItemType="Text Item" Prompt="Comments" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="458" ColumnName="COMMENTS" PromptAlign="Center" CanvasName="CANVAS4" DataLengthSemantics="BYTE" Height="16"/>
         <Item Name="MANAGER_ID" MaximumLength="8" YPosition="124" XPosition="1090" DataType="Number" ItemsDisplay="0" ItemType="Text Item" Prompt="Manager" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="68" ColumnName="MANAGER_ID" PromptAlign="Center" CanvasName="CANVAS4" Height="16"/>
         <Item Name="TITLE" MaximumLength="25" YPosition="124" XPosition="1158" ItemsDisplay="0" ItemType="Text Item" Prompt="Title" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="195" ColumnName="TITLE" PromptAlign="Center" CanvasName="CANVAS4" DataLengthSemantics="BYTE" Height="16"/>
         <Item Name="DEPT_ID" MaximumLength="8" YPosition="124" XPosition="1353" DataType="Number" ItemsDisplay="0" ItemType="Text Item" CopyValueFromItem="DEPT.ID" Prompt="Department" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="68" ColumnName="DEPT_ID" PromptAlign="Center" CanvasName="CANVAS4" Height="16"/>
         <Item Name="SALARY" MaximumLength="13" YPosition="124" XPosition="1421" DataType="Number" ItemsDisplay="0" ItemType="Text Item" Prompt="Salary" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="105" ColumnName="SALARY" PromptAlign="Center" CanvasName="CANVAS4" Height="16"/>
         <Item Name="COMMISSION_PCT" MaximumLength="6" YPosition="124" XPosition="1532" DataType="Number" ItemsDisplay="0" ItemType="Text Item" Prompt="Commission Pct" TabPageName="" PromptDisplayStyle="First Record" DirtyInfo="true" PromptAttachmentEdge="Top" Width="53" ColumnName="COMMISSION_PCT" PromptAlign="Center" CanvasName="CANVAS4" Height="16"/>
         <DataSourceColumn Type="Query" DSCType="NUMBER" DSCName="ID" DSCNochildren="false" DSCLength="0" DSCMandatory="true" DSCPrecision="7" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="VARCHAR2" DSCName="LAST_NAME" DSCNochildren="false" DSCLength="25" DSCMandatory="true" DSCPrecision="0" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="VARCHAR2" DSCName="FIRST_NAME" DSCNochildren="false" DSCLength="25" DSCMandatory="false" DSCPrecision="0" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="VARCHAR2" DSCName="USERID" DSCNochildren="false" DSCLength="8" DSCMandatory="false" DSCPrecision="0" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="DATE" DSCName="START_DATE" DSCNochildren="false" DSCLength="0" DSCMandatory="false" DSCPrecision="0" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="VARCHAR2" DSCName="COMMENTS" DSCNochildren="false" DSCLength="255" DSCMandatory="false" DSCPrecision="0" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="NUMBER" DSCName="MANAGER_ID" DSCNochildren="false" DSCLength="0" DSCMandatory="false" DSCPrecision="7" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="VARCHAR2" DSCName="TITLE" DSCNochildren="false" DSCLength="25" DSCMandatory="false" DSCPrecision="0" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="NUMBER" DSCName="DEPT_ID" DSCNochildren="false" DSCLength="0" DSCMandatory="false" DSCPrecision="7" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="NUMBER" DSCName="SALARY" DSCNochildren="false" DSCLength="0" DSCMandatory="false" DSCPrecision="11" DSCScale="2"/>
         <DataSourceColumn Type="Query" DSCType="NUMBER" DSCName="COMMISSION_PCT" DSCNochildren="false" DSCLength="0" DSCMandatory="false" DSCPrecision="4" DSCScale="2"/>
      </Block>
      <Block Name="DEPT" DirtyInfo="true" ScrollbarWidth="15" QueryDataSourceName="S_DEPT" ScrollbarLength="158">
         <Item Name="ID" MaximumLength="8" YPosition="33" XPosition="62" DataType="Number" ItemsDisplay="0" DistanceBetweenRecords="16" ItemType="Text Item" Prompt="Id" TabPageName="" PromptDisplayStyle="All Records" DirtyInfo="true" Width="68" ColumnName="ID" PromptAttachmentOffset="8" CanvasName="CANVAS4" Height="16" Required="true"/>
         <Item Name="NAME" MaximumLength="25" YPosition="33" XPosition="318" ItemsDisplay="0" DistanceBetweenRecords="16" ItemType="Text Item" Prompt="Name" TabPageName="" PromptDisplayStyle="All Records" DirtyInfo="true" Width="195" ColumnName="NAME" PromptAttachmentOffset="8" CanvasName="CANVAS4" DataLengthSemantics="BYTE" Height="16" Required="true"/>
         <Item Name="REGION_ID" MaximumLength="8" YPosition="49" XPosition="62" DataType="Number" ItemsDisplay="0" DistanceBetweenRecords="16" ItemType="Text Item" Prompt="Region Id" TabPageName="" PromptDisplayStyle="All Records" DirtyInfo="true" Width="68" ColumnName="REGION_ID" PromptAttachmentOffset="8" CanvasName="CANVAS4" Height="16"/>
         <Item Name="BTN_ACTION" YPosition="72" XPosition="508" ItemType="Push Button" BackColor="white" FontWeight="Demilight" Label="PUSH_BUTTON9" FontStyle="Plain" ForegroundColor="black" DirtyInfo="true" FontSpacing="Normal" Width="85" FontSize="900" FontName="Segoe UI" CanvasName="CANVAS4" Height="19"/>
         <DataSourceColumn Type="Query" DSCType="NUMBER" DSCName="ID" DSCNochildren="false" DSCLength="0" DSCMandatory="true" DSCPrecision="7" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="VARCHAR2" DSCName="NAME" DSCNochildren="false" DSCLength="25" DSCMandatory="true" DSCPrecision="0" DSCScale="0"/>
         <DataSourceColumn Type="Query" DSCType="NUMBER" DSCName="REGION_ID" DSCNochildren="false" DSCLength="0" DSCMandatory="false" DSCPrecision="7" DSCScale="0"/>
         <Relation Name="DEPT_EMP" DeleteRecord="Non Isolated" Deferred="false" DirtyInfo="true" JoinCondition="EMP.DEPT_ID = DEPT.ID" DetailBlock="EMP" RelationType="Join" AutoQuery="false" PreventMasterlessOperations="false"/>
         <Trigger Name="ON-POPULATE-DETAILS" TriggerText="--&amp;#10;-- Begin default relation declare section&amp;#10;--&amp;#10;DECLARE&amp;#10;  recstat     VARCHAR2(20) := :System.record_status;   &amp;#10;  startitm    VARCHAR2(61) := :System.cursor_item;   &amp;#10;  rel_id      Relation;&amp;#10;--&amp;#10;-- End default relation declare section&amp;#10;--&amp;#10;--&amp;#10;-- Begin default relation program section&amp;#10;--&amp;#10;BEGIN&amp;#10;  IF ( recstat = 'NEW' or recstat = 'INSERT' ) THEN   &amp;#10;    RETURN;&amp;#10;  END IF;&amp;#10;  --&amp;#10;  -- Begin EMP detail program section&amp;#10;  --&amp;#10;  IF ( (:DEPT.ID is not null) ) THEN   &amp;#10;    rel_id := Find_Relation('DEPT.DEPT_EMP');   &amp;#10;    Query_Master_Details(rel_id, 'EMP');   &amp;#10;  END IF;&amp;#10;  --&amp;#10;  -- End EMP detail program section&amp;#10;  --&amp;#10;&amp;#10;  IF ( :System.cursor_item &lt;> startitm ) THEN     &amp;#10;     Go_Item(startitm);     &amp;#10;     Check_Package_Failure;     &amp;#10;  END IF;&amp;#10;END;&amp;#10;--&amp;#10;-- End default relation program section&amp;#10;--&amp;#10;" DirtyInfo="true"/>
         <Trigger Name="ON-CHECK-DELETE-MASTER" TriggerText="--&amp;#10;-- Begin default relation declare section&amp;#10;--&amp;#10;DECLARE&amp;#10;  Dummy_Define CHAR(1);&amp;#10;  --&amp;#10;  -- Begin EMP detail declare section&amp;#10;  --&amp;#10;  CURSOR EMP_cur IS      &amp;#10;    SELECT 1 FROM S_EMP S     &amp;#10;    WHERE S.DEPT_ID = :DEPT.ID;&amp;#10;  --&amp;#10;  -- End EMP detail declare section&amp;#10;  --&amp;#10;--&amp;#10;-- End default relation declare section&amp;#10;--&amp;#10;--&amp;#10;-- Begin default relation program section&amp;#10;--&amp;#10;BEGIN&amp;#10;  --&amp;#10;  -- Begin EMP detail program section&amp;#10;  --&amp;#10;  OPEN EMP_cur;     &amp;#10;  FETCH EMP_cur INTO Dummy_Define;     &amp;#10;  IF ( EMP_cur%found ) THEN     &amp;#10;    Message('Cannot delete master record when matching detail records exist.');     &amp;#10;    CLOSE EMP_cur;     &amp;#10;    RAISE Form_Trigger_Failure;     &amp;#10;  END IF;&amp;#10;  CLOSE EMP_cur;&amp;#10;  --&amp;#10;  -- End EMP detail program section&amp;#10;  --&amp;#10;END;&amp;#10;--&amp;#10;-- End default relation program section&amp;#10;--&amp;#10;" DirtyInfo="true"/>
      </Block>
      <Canvas Name="CANVAS4" ViewportHeight="378" ViewportWidth="600" CanvasType="Content" DirtyInfo="true" Width="1622" Height="378" WindowName="WINDOW1">
         <Graphics Name="FRAME5" YPosition="17" XPosition="8" GraphicsType="Frame" FillPattern="none" Bevel="Inset" DirtyInfo="true" Width="513" ScrollbarWidth="15" Height="64" EdgePattern="solid" GraphicsFontColorCode="0" GraphicsFontColor="" EdgeBackColor="white" FrameTitleOffset="15" FrameTitle="Departments" FrameTitleSpacing="8" VerticalMargin="16" HorizontalMargin="8" GraphicsText="" HorizontalObjectOffset="15" LayoutDataBlockName="DEPT" StartPromptOffset="8" GraphicsFontName="" GraphicsFontStyle="0" GraphicsFontWeight="Ultralight" GraphicsFontSize="0" GraphicsFontSpacing="Ultradense"/>
         <Graphics Name="FRAME8" YPosition="97" XPosition="8" RecordsDisplayCount="10" GraphicsType="Frame" FillPattern="none" ShowScrollbar="true" Bevel="Inset" DirtyInfo="true" Width="1606" ScrollbarWidth="15" Height="203" EdgePattern="solid" GraphicsFontColorCode="0" GraphicsFontColor="" EdgeBackColor="white" FrameTitleOffset="15" FrameTitle="Employees" FrameTitleSpacing="8" LayoutStyle="Tabular" VerticalMargin="16" HorizontalMargin="8" GraphicsText="" HorizontalObjectOffset="0" LayoutDataBlockName="EMP" StartPromptOffset="8" GraphicsFontName="" GraphicsFontStyle="0" GraphicsFontWeight="Ultralight" GraphicsFontSize="0" GraphicsFontSpacing="Ultradense"/>
      </Canvas>
      <ProgramUnit Name="CHECK_PACKAGE_FAILURE" ProgramUnitType="Procedure" ProgramUnitText="Procedure Check_Package_Failure IS&amp;#10;BEGIN&amp;#10;  IF NOT ( Form_Success ) THEN&amp;#10;    RAISE Form_Trigger_Failure;&amp;#10;  END IF;&amp;#10;END;"/>
      <ProgramUnit Name="QUERY_MASTER_DETAILS" ProgramUnitType="Procedure" ProgramUnitText="PROCEDURE Query_Master_Details(rel_id Relation,detail VARCHAR2) IS&amp;#10;  oldmsg VARCHAR2(2);  -- Old Message Level Setting&amp;#10;  reldef VARCHAR2(5);  -- Relation Deferred Setting&amp;#10;BEGIN&amp;#10;  --&amp;#10;  -- Initialize Local Variable(s)&amp;#10;  --&amp;#10;  reldef := Get_Relation_Property(rel_id, DEFERRED_COORDINATION);&amp;#10;  oldmsg := :System.Message_Level;&amp;#10;  --&amp;#10;  -- If NOT Deferred, Goto detail and execute the query.&amp;#10;  --&amp;#10;  IF reldef = 'FALSE' THEN&amp;#10;    Go_Block(detail);&amp;#10;    Check_Package_Failure;&amp;#10;    :System.Message_Level := '10';&amp;#10;    Execute_Query;&amp;#10;    :System.Message_Level := oldmsg;&amp;#10;  ELSE&amp;#10;    --&amp;#10;    -- Relation is deferred, mark the detail block as un-coordinated&amp;#10;    --&amp;#10;    Set_Block_Property(detail, COORDINATION_STATUS, NON_COORDINATED);&amp;#10;  END IF;&amp;#10;&amp;#10;EXCEPTION&amp;#10;    WHEN Form_Trigger_Failure THEN&amp;#10;      :System.Message_Level := oldmsg;&amp;#10;      RAISE;&amp;#10;END Query_Master_Details;&amp;#10;"/>
      <ProgramUnit Name="CLEAR_ALL_MASTER_DETAILS" ProgramUnitType="Procedure" ProgramUnitText="PROCEDURE Clear_All_Master_Details IS&amp;#10;  mastblk  VARCHAR2(30);  -- Initial Master Block Causing Coord&amp;#10;  coordop  VARCHAR2(30);  -- Operation Causing the Coord&amp;#10;  trigblk  VARCHAR2(30);  -- Cur Block On-Clear-Details Fires On&amp;#10;  startitm VARCHAR2(61);  -- Item in which cursor started&amp;#10;  frmstat  VARCHAR2(15);  -- Form Status&amp;#10;  curblk   VARCHAR2(30);  -- Current Block&amp;#10;  currel   VARCHAR2(30);  -- Current Relation&amp;#10;  curdtl   VARCHAR2(30);  -- Current Detail Block&amp;#10;&amp;#10;  FUNCTION First_Changed_Block_Below(Master VARCHAR2)&amp;#10;  RETURN VARCHAR2 IS&amp;#10;    curblk VARCHAR2(30);  -- Current Block&amp;#10;    currel VARCHAR2(30);  -- Current Relation&amp;#10;    retblk VARCHAR2(30);  -- Return Block&amp;#10;  BEGIN&amp;#10;    --&amp;#10;    -- Initialize Local Vars&amp;#10;    --&amp;#10;    curblk := Master;&amp;#10;    currel := Get_Block_Property(curblk,  FIRST_MASTER_RELATION);&amp;#10;    --&amp;#10;    -- While there exists another relation for this block&amp;#10;    --&amp;#10;    WHILE currel IS NOT NULL LOOP&amp;#10;      --&amp;#10;      -- Get the name of the detail block&amp;#10;      --&amp;#10;      curblk := Get_Relation_Property(currel, DETAIL_NAME);&amp;#10;      --&amp;#10;      -- If this block has changes, return its name&amp;#10;      --&amp;#10;      IF ( Get_Block_Property(curblk, STATUS) = 'CHANGED' ) THEN&amp;#10;        RETURN curblk;&amp;#10;      ELSE&amp;#10;        --&amp;#10;        -- No changes, recursively look for changed blocks below&amp;#10;        --&amp;#10;        retblk := First_Changed_Block_Below(curblk);&amp;#10;        --&amp;#10;        -- If some block below is changed, return its name&amp;#10;        --&amp;#10;        IF retblk IS NOT NULL THEN&amp;#10;          RETURN retblk;&amp;#10;        ELSE&amp;#10;          --&amp;#10;          -- Consider the next relation&amp;#10;          --&amp;#10;          currel := Get_Relation_Property(currel, NEXT_MASTER_RELATION);&amp;#10;        END IF;&amp;#10;      END IF;&amp;#10;    END LOOP;&amp;#10;&amp;#10;    --&amp;#10;    -- No changed blocks were found&amp;#10;    --&amp;#10;    RETURN NULL;&amp;#10;  END First_Changed_Block_Below;&amp;#10;&amp;#10;BEGIN&amp;#10;  --&amp;#10;  -- Init Local Vars&amp;#10;  --&amp;#10;  mastblk  := :System.Master_Block;&amp;#10;  coordop  := :System.Coordination_Operation;&amp;#10;  trigblk  := :System.Trigger_Block;&amp;#10;  startitm := :System.Cursor_Item;&amp;#10;  frmstat  := :System.Form_Status;&amp;#10;&amp;#10;  --&amp;#10;  -- If the coordination operation is anything but CLEAR_RECORD or&amp;#10;  -- SYNCHRONIZE_BLOCKS, then continue checking.&amp;#10;  --&amp;#10;  IF coordop NOT IN ('CLEAR_RECORD', 'SYNCHRONIZE_BLOCKS') THEN&amp;#10;    --&amp;#10;    -- If we're processing the driving master block...&amp;#10;    --&amp;#10;    IF mastblk = trigblk THEN&amp;#10;      --&amp;#10;      -- If something in the form is changed, find the&amp;#10;      -- first changed block below the master&amp;#10;      --&amp;#10;      IF frmstat = 'CHANGED' THEN&amp;#10;        curblk := First_Changed_Block_Below(mastblk);&amp;#10;        --&amp;#10;        -- If we find a changed block below, go there&amp;#10;        -- and Ask to commit the changes.&amp;#10;        --&amp;#10;        IF curblk IS NOT NULL THEN&amp;#10;          Go_Block(curblk);&amp;#10;          Check_Package_Failure;&amp;#10;          Clear_Block(ASK_COMMIT);&amp;#10;          --&amp;#10;          -- If user cancels commit dialog, raise error&amp;#10;          --&amp;#10;          IF NOT ( :System.Form_Status = 'QUERY'&amp;#10;                   OR :System.Block_Status = 'NEW' ) THEN&amp;#10;            RAISE Form_Trigger_Failure;&amp;#10;          END IF;&amp;#10;        END IF;&amp;#10;      END IF;&amp;#10;    END IF;&amp;#10;  END IF;&amp;#10;&amp;#10;  --&amp;#10;  -- Clear all the detail blocks for this master without&amp;#10;  -- any further asking to commit.&amp;#10;  --&amp;#10;  currel := Get_Block_Property(trigblk, FIRST_MASTER_RELATION);&amp;#10;  WHILE currel IS NOT NULL LOOP&amp;#10;    curdtl := Get_Relation_Property(currel, DETAIL_NAME);&amp;#10;    IF Get_Block_Property(curdtl, STATUS) &lt;> 'NEW'  THEN&amp;#10;      Go_Block(curdtl);&amp;#10;      Check_Package_Failure;&amp;#10;      Clear_Block(NO_VALIDATE);&amp;#10;      IF :System.Block_Status &lt;> 'NEW' THEN&amp;#10;        RAISE Form_Trigger_Failure;&amp;#10;      END IF;&amp;#10;    END IF;&amp;#10;    currel := Get_Relation_Property(currel, NEXT_MASTER_RELATION);&amp;#10;  END LOOP;&amp;#10;&amp;#10;  --&amp;#10;  -- Put cursor back where it started&amp;#10;  --&amp;#10;  IF :System.Cursor_Item &lt;> startitm THEN&amp;#10;    Go_Item(startitm);&amp;#10;    Check_Package_Failure;&amp;#10;  END IF;&amp;#10;&amp;#10;EXCEPTION&amp;#10;  WHEN Form_Trigger_Failure THEN&amp;#10;    IF :System.Cursor_Item &lt;> startitm THEN&amp;#10;      Go_Item(startitm);&amp;#10;    END IF;&amp;#10;    RAISE;&amp;#10;&amp;#10;END Clear_All_Master_Details;&amp;#10;"/>
      <Trigger Name="ON-CLEAR-DETAILS" TriggerText="--&amp;#10;-- Begin default relation program section&amp;#10;--&amp;#10;BEGIN&amp;#10;  Clear_All_Master_Details;&amp;#10;END;&amp;#10;--&amp;#10;-- End default relation program section&amp;#10;--&amp;#10;" DirtyInfo="true"/>
      <Window Name="WINDOW1" Width="600" Height="378"/>
   </FormModule>
</Module>
